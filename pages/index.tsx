import Head from 'next/head'
import { Breadcrumb, Table } from 'antd';
import { ReactElement, Suspense } from 'react';
import { NextPageWithLayout } from './_app';
import { LayoutFirst } from '@components/common';
import { Card } from '@components/ui';
import {ArcElement} from 'chart.js';
Chart.register(ArcElement);
import { Chart } from 'chart.js/auto'
import React, { useRef, useEffect } from "react";

const Home: NextPageWithLayout = () => {

  // const data = {
  //   labels:['Por iniciar','Más de 6 meses','Fuera de fecha','De 3 a 6 meses','Finalizado','Menos de 3 meses'],
  //   datasets:[{
  //     data:[15,25,5,35,8,12],
  //     backgroundColor:['white','green','black','yellow','#7a8a82','red']
  //   }]
  // };

  // const opciones = {
  //   responsive:true,
  //   maintainAspectRatio: false,
  //   pieceLabel:{
  //     render: function(args: { label: string; value: string; }){
  //       return args.label+": "+args.value+"procesos";
  //     },
  //     fontSize: 15,
  //     fontColor: '#fff',
  //     fonFamily: 'Arial'
  //   }
  // }

  const canvas = useRef();

  useEffect(() => {
    const ctx = canvas.current;

    let chartStatus = Chart.getChart("chart");
    if (chartStatus !== undefined || chartStatus) {
      chartStatus.destroy();
    }

    new Chart(ctx, {
      type: "pie",
      data: {
        labels: ['Por iniciar','Fuera de fecha','Finalizado','Más de 6 meses','De 3 a 6 meses','Menos de 3 meses'],
        datasets: [
          {
            label: "Procesos",
            data: [15,25,5,35,8,12],
            backgroundColor: [
              "rgb(255,255,255)",
              "rgba(5,5,5,255)",
              "rgb(136,132,132)",
              "rgb(120,188,68)",
              "rgb(256,188,28)",
              "rgb(232,52,44)"
            ],
            borderColor: [
              "rgba(5,5,5,255)",
              "rgba(5,5,5,255)",
              "rgb(136,132,132)",
              "rgb(120,188,68)",
              "rgb(256,188,28)",
              "rgb(232,52,44)"
            ],
            borderWidth: 1
          }
        ]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: "top"
          },
          title: {
            display: true,
            text: "Total: 100 procesos"
          }
        }
      }
    });
  }, []);

  const column = [
    {
      title: 'Proceso',
      dataIndex: 'proceso',
      key: 'proceso',
    },
    {
      title: 'Grado',
      dataIndex: 'grado',
      key: 'grado',
    },
    {
      title: 'Fecha Inicio',
      dataIndex: 'fechainicio',
      key: 'fechainicio',
    },
    {
      title: 'Estado',
      dataIndex: 'estado',
      key: 'estado',
    }
  ];

  
  const dataSource = [
    {
      key: '1',
      proceso: 'Organización Política 1515',
      grado: 'Instrucción',
      fechainicio: '01 Feb 2023',
      estado: <div style={{color:'rgb(232,52,44)'}}><ion-icon name="ellipse"></ion-icon></div>
    },
    {
      key: '2',
      proceso: 'Organización Política 1516',
      grado: 'Sancionadora',
      fechainicio: '20 Mar 2023',
      estado: <div style={{color:'rgb(232,52,44)'}}><ion-icon name="ellipse"></ion-icon></div>
    },
    {
      key: '3',
      proceso: 'Marco Marcelaris',
      grado: 'Instrucción',
      fechainicio: '15 Jun 2024',
      estado: <div style={{color:'rgb(256,188,28)'}}><ion-icon name="ellipse"></ion-icon></div>
    },
    {
      key: '4',
      proceso: 'Organización Política 1516',
      grado: 'Sancionadora',
      fechainicio: '01 Feb 2024',
      estado: <div style={{color:'rgb(256,188,28)'}}><ion-icon name="ellipse"></ion-icon></div>
    }
  ];


  return (
    <>
          
      <Head>
        <title>Monitoreo de PAS</title>
        <meta name="description" content="Generated by Monitoreo de PAS" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Breadcrumb style={{ margin: '5px 0', color:'white' }}>
        <Breadcrumb.Item>Bienvenido</Breadcrumb.Item>
      </Breadcrumb>

      <script 
        defer 
        type="module" 
        src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js">
      </script>
      
      <script 
        defer 
        noModule
        src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js">
      </script>

      <table key='1'>
        <tbody key='2'>
          <tr key='3'>
          <td key='4' style={{ width:'50%'}}>
        <Card>
        <div key='5'>
          <h2 key='6'>Resumen</h2>
        </div>
        <div key='7'><canvas id="myChart" ref={canvas}></canvas></div>
        
        {/* <div style={{ width:'100%', height:'300px'}}>
          <Pie data = {data} options = {opciones}/>
        </div> */}
      </Card>
      </td>

      <td key='8' style={{ width:'50%'}}>
      <Card>
        <div key='9'>
          <h2 key='10'>Próximos procesos por concluir</h2>
        </div>
        
        <Table  columns={column} rowKey='id' dataSource={dataSource}/>
        
      </Card>
      </td>
          </tr>
        </tbody>

      </table>
      
    </>
  )
}

Home.getLayout = function getLayout(page: ReactElement) {
  return (
    <LayoutFirst>
      {page}
    </LayoutFirst>
  )
}

export default Home




